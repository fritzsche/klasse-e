\documentclass[10pt,a4paper,ngerman]{article}
\usepackage[utf8]{inputenc}
\usepackage{tkz-euclide}
\usepackage[T1]{fontenc}

%\usepackage[]{ntheorem}
%\usepackage[amsthm,thmmarks]{ntheorem}
\usepackage{amsmath}
%\usepackage{amsthm}
\usepackage{hyperref}
\usepackage{cleveref}

\usepackage{amsthm}
\usepackage{thmtools}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{babel}
\usepackage{textcomp}

\usepackage{adjustbox}


\newtheoremstyle{mytheorem}
  {} % Space above (default: 3pt)
  {} % Space below (default: 3pt)
  {\itshape} % Body font: set to italic (standard for plain theorem style)
  {} % Indent amount
  {\bfseries} % Head font: set to bold
  {.} % Punctuation after theorem head (e.g., Theorem 1.1.)
  {.5em} % Space after theorem head (e.g., .5em or " " for normal interword space)
  {\thmname{#1}\thmnumber{ #2}\thmnote{ (\textbf{#3})}}


\theoremstyle{definition}
\newtheorem{defn}{Definition}
\newtheorem*{example}{Beispiel}

\theoremstyle{plain}
\theoremstyle{mytheorem}
\newtheorem{theorem}{Satz}
\newtheorem{lemma}{Lemma}
\newtheorem*{axiom}{Axiom}

\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Prim}{\mathbb{P}}
\newcommand{\Nnull}{\mathbb{N}_0}

%*****************************************
\usepackage{adjustbox}
%\usepackage{stackengine}
%\usepackage{paralist}
\usepackage{xfp}
\usepackage{siunitx} % Wichtig für Zahlenformatierung
\usepackage{xparse}
\usepackage{xstring}
\usepackage{enumitem}
\usepackage{environ}
\usepackage{textcmds}
\usepackage[left=25mm,right=25mm,top=25mm,bottom=25mm,paper=a4paper]{geometry}

\usepackage[HTML]{xcolor}


\newcommand{\qref}[1]{\hyperref[#1]{#1}}

\definecolor{c00a0dc}{HTML}{00A0DC}
\definecolor{cbdbdbd}{HTML}{0BBDBD}
\definecolor{ce05022}{HTML}{E05022}
\definecolor{ce5e5e5}{HTML}{E5E5E5}
\definecolor{c7fcfed}{HTML}{7FCFED}

\definecolor{cbfbfbf}{HTML}{BFBFBF}
\definecolor{c7f7f7f}{HTML}{7F7F7F}

\usepackage{svg}

\usepackage{siunitx}
\sisetup{locale = DE}
%\usepackage{array}

\theoremstyle{definition}
\newtheorem*{auf}{Aufgabe}

\usepackage{circuitikz}[european]


%\newcommand{\frage}[6]{%
%  \item[#1] #2
%  \begin{enumerate}
%    \item #3
%    \item #4
%    \item #5
%    \item #6
%  \end{enumerate}
%}


%\makeatletter
\NewEnviron{sol}[1]{%
  \edef\macroname{savedata@#1}%
  % Verwende \let anstelle von \edef, um eine Expansion des Inhalts zu verhindern
  \expandafter\global\expandafter\let\csname \macroname\endcsname\BODY
}
%\makeatother

\newcommand{\getsavedata}[1]{%
  \ifcsname savedata@#1\endcsname
    \par\noindent\hrulefill\par
    \textbf{Lösungsansatz:}\par
    \csname savedata@#1\endcsname
    \par\noindent
    \hrulefill%\par
  \else
    % Nichts tun oder eine Warnung ausgeben
  \fi
}

\newcommand{\pic}[2][1]{%
\begin{center}
    \begin{tikzpicture}[scale=#1]
        \input{bilder/#2.tex}        
    \end{tikzpicture}
\end{center}    
}

\newcommand{\qgrafic}[2][1.3]{%
\begin{center}  
    \begin{tikzpicture}[scale=#1]
        \input{pic/#2_q.tex}        
    \end{tikzpicture}
\end{center}    
}


\newcommand{\qgraficmeasure}[2][1.3]{%
  \begin{tikzpicture}[scale=#1]
    \input{pic/#2_q.tex}
  \end{tikzpicture}%
}

% Automatic layout switcher
\newsavebox{\tempbox}
\newlength{\imgwidth}
\newlength{\imgheight}

\newcommand{\agrafic}[2]{%
\resizebox{!}{3cm}{
  \begin{tikzpicture}[scale=1.5]
      \input{pic/#1_#2.tex}        
  \end{tikzpicture}
}
}


\ExplSyntaxOn
\NewDocumentCommand{\frage}{ m m m m m m m m }{
  \item[#1] \label{#1} #2
    \tl_if_eq:nnTF {#7} {true} {
      \sbox{\tempbox}{\qgraficmeasure{#1}}%
      \settoheight{\imgheight}{\usebox{\tempbox}}%
        \ifdim \imgheight>10cm          
          \qgrafic[0.7]{#1}
        \else          
          \qgrafic{#1}
        \fi  
    }{}
\getsavedata{#1}

\tl_if_eq:nnTF {#8} {true} {
\begin{center}

  \sbox{\tempbox}{\adjustbox{valign=c}{\agrafic{#1}{a}}}%
  \settowidth{\imgwidth}{\usebox{\tempbox}}%

  % If two side-by-side images exceed 0.9 of text width, switch to 1x4
  \ifdim 2\imgwidth>0.9\linewidth
    % ---------- Wide layout: 1×4 ----------
    \begin{enumerate}[label=(\Alph*)]
      \item \adjustbox{valign=c}{\agrafic{#1}{a}}
      \item \adjustbox{valign=c}{\agrafic{#1}{b}}
      \item \adjustbox{valign=c}{\agrafic{#1}{c}}
      \item \adjustbox{valign=c}{\agrafic{#1}{d}}
    \end{enumerate}
  \else
    % ---------- Normal layout: 2×2 ----------
    \begin{tabular}{cc}
      (A) \adjustbox{valign=c}{\agrafic{#1}{a}} &
      (B) \adjustbox{valign=c}{\agrafic{#1}{b}} \\
      \multicolumn{2}{c}{\vspace{10pt}} \\
      (C) \adjustbox{valign=c}{\agrafic{#1}{c}} &
      (D) \adjustbox{valign=c}{\agrafic{#1}{d}} \\
    \end{tabular}
  \fi

\end{center}


%\begin{enumerate}[label=(\Alph*)]
%    \item \adjustbox{valign=c}{\agrafic{#1}{a}} 
%    \item \adjustbox{valign=c}{\agrafic{#1}{b}} 
%    \item \adjustbox{valign=c}{\agrafic{#1}{c}} 
%    \item \adjustbox{valign=c}{\agrafic{#1}{d}}   
%  \end{enumerate}        
} {
  \begin{enumerate}[label=(\Alph*)]
    \item #3
    \item #4
    \item #5
    \item #6
  \end{enumerate}      
}

}
\ExplSyntaxOff

\newenvironment{ohmchapter}{}
{
  \subsubsection*{Lösungen}
  \input{tex_sections/\arabic{section}S\arabic{subsection}.tex}
}



\newcommand{\DEnumber}[1]{%
    \num[
        parse-numbers=true,          % Wichtig: Erzwingt die Analyse der Zahl
        output-decimal-marker={,},   % Für das Komma als Dezimaltrennzeichen
        group-separator={\,},        % Optional: Dünner Zwischenraum als Tausender-Trennzeichen
        scientific-notation=false    % Sicherstellen, dass keine wissenschaftliche Notation verwendet wird
    ]{#1}%
}

\newcommand{\calc}[1]{%
  \DEnumber{\fpeval{#1}}
}

\newcommand{\mischer}[2]{%    
    Wir rechnen: 
    \begin{itemize}
      \item \DEnumber{#1} MHz - \DEnumber{#2} MHz = \calc{#1-#2} MHz
      \item \DEnumber{#1} MHz + \DEnumber{#2} MHz = \calc{#1+#2} MHz        
    \end{itemize}  
}

\author{Thomas Fritzsche}
\title{Lernkrücken für den Amateurfunkkurs der Klasse E von A02}
\begin{document}
\maketitle
\tableofcontents





%%%%%%%%%%%%%%%%%
%%%  Kapitel  %%%
%%%%%%%%%%%%%%%%%


\input{kapitel_0.tex}
\input{kapitel_8.tex}
\input{kapitel_9.tex}
%\input{kapitel_10.tex}
%\input{kapitel_11.tex}
%\input{kapitel_12.tex}
%\input{kapitel_13.tex}
%\input{kapitel_14.tex}

\end{document}